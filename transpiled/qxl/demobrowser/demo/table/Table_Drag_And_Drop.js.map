{
  "version": 3,
  "sources": [
    "/home/travis/build/qooxdoo/qxl.demobrowser/source/class/qxl/demobrowser/demo/table/Table_Drag_And_Drop.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "qxl",
    "demobrowser",
    "demo",
    "table",
    "TableDemo",
    "members",
    "getCaption",
    "createTable",
    "tableModel",
    "_tableModel",
    "ui",
    "model",
    "Simple",
    "setColumns",
    "setData",
    "createRandomRows",
    "setColumnEditable",
    "Table",
    "set",
    "decorator",
    "tcm",
    "getTableColumnModel",
    "setDataCellRenderer",
    "cellrenderer",
    "Boolean",
    "setHeaderCellRenderer",
    "headerrenderer",
    "Icon",
    "setDraggable",
    "setDroppable",
    "setFocusCellOnPointerMove",
    "addListener",
    "_handleDragStart",
    "_handleDropRequest",
    "_handleDrop",
    "e",
    "focusedRow",
    "_table",
    "getFocusedRow",
    "_startRow",
    "maxIndex",
    "minIndex",
    "addAction",
    "addType",
    "type",
    "getCurrentType",
    "sel",
    "getSelectionModel",
    "getSelectedRanges",
    "length",
    "selMap",
    "i",
    "s",
    "rowdata",
    "getTableModel",
    "getRowData",
    "rowId",
    "push",
    "addData",
    "supportsType",
    "data",
    "getData",
    "dm",
    "removeRows",
    "addRows",
    "destruct",
    "_disposeObjects",
    "Table_Drag_And_Drop"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2008 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Fabian Jakobs (fjakobs)\n\n************************************************************************ */\n\n/* ************************************************************************\n\n\n************************************************************************ */\n\n/**\n * A table with virtual scrolling, model-view-controller, renderer,\n * editing, sorting, column resizing, column reordering,\n * column hiding.\n *\n *\n * @asset(qx/icon/${qx.icontheme}/22/actions/list-add.png)\n * @asset(qx/icon/${qx.icontheme}/22/actions/list-remove.png)\n * @asset(qx/icon/${qx.icontheme}/22/actions/edit-undo.png)\n * @asset(qx/icon/${qx.icontheme}/22/status/dialog-information.png)\n * @asset(qx/icon/${qx.icontheme}/16/apps/office-calendar.png)\n * @tag noPlayground\n * @tag showcase\n */\nqx.Class.define(\"qxl.demobrowser.demo.table.Table_Drag_And_Drop\",\n{\n  extend : qxl.demobrowser.demo.table.TableDemo,\n\n  members :\n  {\n    getCaption : function() {\n      return \"Table\";\n    },\n\n\n    createTable : function()\n    {\n      // table model\n      var tableModel = this._tableModel = new qx.ui.table.model.Simple();\n      tableModel.setColumns([ \"ID\", \"A number\", \"A date\", \"Boolean\" ]);\n      tableModel.setData(this.createRandomRows(100));\n\n      // make second column editable\n      tableModel.setColumnEditable(1, true);\n\n      // table\n      var table = new qx.ui.table.Table(tableModel).set({\n        decorator: null\n      })\n\n      var tcm = table.getTableColumnModel();\n\n      // Display a checkbox in column 3\n      tcm.setDataCellRenderer(3, new qx.ui.table.cellrenderer.Boolean());\n\n      // use a different header renderer\n      tcm.setHeaderCellRenderer(2, new qx.ui.table.headerrenderer.Icon(\"icon/16/apps/office-calendar.png\", \"A date\"));\n\n\n      table.setDraggable(true);\n      table.setDroppable(true);\n      table.setFocusCellOnPointerMove(true);\n\n      table.addListener(\"dragstart\", this._handleDragStart, this);\n      table.addListener(\"droprequest\", this._handleDropRequest, this);\n      table.addListener(\"drop\", this._handleDrop, this);\n\n      return table;\n    },\n\n\n    _handleDragStart: function(e) {\n      var focusedRow = this._table.getFocusedRow();\n      this._startRow = {maxIndex: focusedRow, minIndex: focusedRow};\n      e.addAction(\"move\");\n      e.addType(\"movetransfer\");\n    },\n\n\n    _handleDropRequest: function(e)\n    {\n      var type = e.getCurrentType();\n      var sel = this._table.getSelectionModel().getSelectedRanges();\n\n      // use the focused row instead of the selection in nothing selected\n      if (sel.length == 0) {\n        sel = [this._startRow];\n      }\n\n      var selMap = [];\n\n      for (var i=0; i<sel.length; i++)\n      {\n        for (var s = sel[i].minIndex; s <= sel[i].maxIndex; s++)\n        {\n          var rowdata = this._table.getTableModel().getRowData(s);\n          if (rowdata == null)\n          {\n            continue;\n          }\n          rowdata.rowId = s;\n          selMap.push(rowdata);\n        }\n      }\n      e.addData(type, selMap);\n    },\n\n\n    _handleDrop: function(e)\n    {\n      if (e.supportsType(\"movetransfer\"))\n      {\n        var data = e.getData(\"movetransfer\");\n        var dm = this._table.getTableModel();\n        dm.removeRows(data[0].rowId, data.length);\n        dm.addRows(data, this._table.getFocusedRow() );\n      }\n    }\n  },\n\n  /*\n   *****************************************************************************\n      DESTRUCT\n   *****************************************************************************\n   */\n\n  destruct : function()\n  {\n    this._disposeObjects(\"_tableModel\");\n  }\n});\n\n"
  ]
}